"use strict";!function(e,i){window._pxam=window._pxam||[];var t={},a=e(".slideshow-background"),n=function L(e,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0;a&&i.dataLayer.page.attributes.promotions&&i.dataLayer.page.attributes.promotions.hasOwnProperty(a)?i.pushToGtmDataLayer(_.extend(i.dataLayer.page.attributes.promotions[a],l(e,t,a,n,o))):a&&setTimeout(function(){L(e,t,a,n,o)},500)},o=function(e){return void 0===e?void 0:e===!0?"experience_optimization":"specials_campaign_manager"},r=function(i){var t=e(i).find(".promotion-container").data("promo-eo");return o(t)},d=function(i){var t=e(i.target).parents().find("[data-promo-eo]").data("promo-eo");return o(t)},l=function(e,i,t,a,n){var o=e.closest("[data-widget-id]"),d=o.find("[data-promo-id='"+t+"']");return d&&d.length?{event:"specialsEvent",specialCta:"promotion"===a?null:a,specialCtaType:"promotion"===n?null:n,specialId:t,specialEvent:i,specialLocationX:d.offset().left,specialLocationY:d.offset().top,specialSlidePosition:d.data("slickIndex")+1||null,specialPlacementType:d.hasClass("promotion-details-content")?"details":"slideshow",specialTrim:e.data("trimName"),specialFeature:r(e),specialAutoGen:!!d.find(".promotion-container").data("auto-generated")}:{}},s=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:!1,r=arguments[3];return i.isComposer?!1:void e(document).trigger("trackEvent",[{widgetName:"slideshow-background: "+a.data("widget-id"),eventName:t.toLowerCase().replace("_"," "),data:n,noninteraction:o,feature:r}])},c=function(e,t,a,n,o){return i.isComposer?!1:void window._pxam.push({type:"event",eventType:e,description:a,contentId:t,contentType:n,feature:o})},u=function(e,i,t,a,o){var r=arguments.length>5&&void 0!==arguments[5]?arguments[5]:!1,d=arguments[6],l=void 0;switch(i){case"PROMO_CLICK":l="click";break;case"PROMO_CLICK_DETAILS":l="click-details";break;default:l=i}n(e,l,t,a,o),s(i,a,!1,d),r!==!1&&(i="click"==i?"SLIDE_CLICK":i,c(i,t,a,o,d))},g=function(e,i,t,a,o){i.viewedSlides||(i.viewedSlides=[]);var r=t?t.replace("slide-",""):"";if(-1==i.viewedSlides.indexOf(r)){var d=a?"PROMO_VIEW":"SLIDE_VIEW",l=a?"PROMO_SLIDE":"SLIDE";i.viewedSlides.push(r),s(d,"",!0,o),c(d,r,"",l,o),n(e,"impression",a)}},p=function(e,i){var t=i||"_self";window.setTimeout(function(){window.open(e,t,"")},100)},f=function(t,a){if(!i.client.isMobile){var n=.165*a||.165*e(t).height(),o=e(t).find(".promotion-container").css("font-size");n=Math.ceil(n),o&&n<o.replace("px","")&&e(t).find(".promotion-container").css("font-size",n)}},m=function(e,t){if(!i.client.isMobile){var a=t||e.height();e.find(".slide, .slide-background").height(a)}},v=function(i){var t=e(i).find(".placeholder-image"),a=e(i).find(".slide-background"),n=function(e){a.width(e)};t.on("load",function(i){e(i.currentTarget).addClass("image-loaded"),n(i.currentTarget.width)}),t.hasClass("image-loaded")&&n(t.width())},h=function(i,t,a){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:!1;e(t).each(function(e,t){i&&v(i,t),n&&f(t,a)})},k=function(t){t.each(function(t,a){e(a)[0].hasAttribute("data-url-href")&&e(a).on("click",function(t){e(t.target).is("a")||i.redirect(e(a).attr("data-url-href"))})})},w=function(i){var t=i.preferences,a=i.$currentWidget,n=i.$slideshow,o=i.$pagerLinks,r=i.$playButton;t.pager&&(o.on("click",function(i){i.preventDefault();var t=i.target,d=e(t).data("index");e(document).trigger("slideshowPagerClick",{currentItem:n.slick("slickCurrentSlide")+1,destinationIndex:d+1,element:t,totalItems:o.length,linkUrl:e(t).attr("href"),linkText:e(t).text(),position:a.context.dataset.widgetId}),o.removeClass("activeSlide"),e(t).addClass("activeSlide"),n.slick("slickGoTo",d),r.removeClass("paused"),u(a,"Pager: Jump to slide "+(d+1),!1)}),n.on("afterChange",function(i,t){o.removeClass("activeSlide"),e(o[t.currentSlide]).addClass("activeSlide")}))},b=function(i){var t=i.find(".promotion-container"),a=!1;return t.each(function(){"true"===e(this).data("promo-eo")&&(a=!0)}),a},y=function(i){var t=i.data("widget-id"),a=i.find(".slide-container");window.DDC&&window.DDC.tracking&&window.DDC.tracking.ddc_abc_cache?C(a,t):e.subscribe("ddc-eo-cookies-set",function(){window.DDC&&window.DDC.tracking&&window.DDC.tracking.ddc_abc_cache&&C(a,t)})},C=function(e,t){var a=i&&i.siteSettings?i.siteSettings.pageAlias:"";if(t&&a){var n=e.find(".slick-track .slide:not(.slick-cloned)"),o=e.find(".slick-track .promo-slide:not(.slick-cloned)").first(),r=n.index(o);0>r&&(r=0);var d="/apis/promotionSlides?widgetId="+encodeURIComponent(a+":"+t),l={method:"GET",headers:new Headers({"content-type":"application/json"}),credentials:"same-origin"};fetch(d,l).then(function(e){if(e.ok)return e;throw new Error(e.statusText+", status "+e.status+".")}).then(function(e){return e.json()}).then(function(i){return O(i,e,t,r)}).catch(function(e){console.log(e)})}},O=function(n,o,r){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(n&&n.length){var l=i&&i.WidgetData&&i.WidgetData["slideshow-background"]?i.WidgetData["slideshow-background"]:{},s={promoBackgroundOverride:"",promoBackground:"geometric",promoBackgroundOverlayColor:"0,0,0",promoBackgroundOpacity:"0",promoBackgroundBehavior:"repeat",promoBackgroundBlur:"0"};s=_.extend(s,l.prefs);var c="";if(n.forEach(function(e){c+=x(e,s,r,i.client)}),c){o.slick("unslick"),o.find(".promo-slide").remove();var u=o.children().length;if(u){var g=o[0];g=g.cloneNode(!0),u>d?o.children(":eq("+d+")").before(c):o.children(":eq("+(u-1)+")").after(c)}else o.html(c);if(o.find(".lazy-image").each(function(){var i=e(this).attr("data-src");e(this).attr("src",i),e(this).attr("data-src",""),e(this).removeClass(".lazy-image")}),i.client.isMobile&&i.mobile&&i.mobile.slidein&&i.mobile.slidein.init('[data-widget-id="'+r+'"] .promo-slide a.dialog'),o.slick(t),a.find(".pager")){a.find(".pager a").remove();for(var p=0;p<o.find(".slide:not(.slick-cloned)").length;p++){var f=e('<a href="#" data-index='+p+">"+(p+1)+"</a>");0===p&&f.addClass("activeSlide"),e(".pager").append(f)}w({preferences:e.getDataAttributes(o),$currentWidget:a,$slideshow:o,$pagerLinks:a.find(".slideControls .pager a"),$playButton:a.find(".slideControls .play")})}}}},x=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},t=arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{isMobile:!1},n="",o="",r=void 0,d=["slide"];if(e.image){var l=a.isMobile?480:1400;o=e.image+"?impolicy=resize&w="+l}if(e.link&&"default"!==e.link){var s=/ & /g;r=e.link.replace(s,"+%26+"),d.push("has-link")}if(e.htmlSlide){var c=e.htmlData,u=!1,g=c.imageOverlayColor||"0,0,0",p=c.imageOverlayOpacity||"0";d.push("html-slide"),d.push("promo-slide"),o?-1!==c.htmlContent.indexOf('data-content-type="disclaimer"')&&(c.htmlContent=""):(d.push("standard-promo"),u=!0,o="v9/media/images/widget-images/v1/"+i.promoBackground+".png",g=i.promoBackgroundOverlayColor,p=i.promoBackgroundOpacity,i.promoBackgroundOverride&&"BLANK"!==i.promoBackgroundOverride&&(o=i.promoBackgroundOverride));var f="";"cover"===c.contentWidth&&(u=!0,d.push("standard-promo"),f="background-size: cover; background-position: center;");var m="background-image: linear-gradient(rgba("+g+","+p+"), rgba("+g+","+p+")), url('"+o+"');";n+='<div id="slide-'+e.id+'" ',n+='class="'+d.join(" ")+'" ',n+=c.buttonHrefPrimary&&!c.buttonTextPrimary?'data-url-href="'+c.buttonHrefPrimary+'" ':"",n+=e.label?'data-label="'+e.label+'" ':"",n+=r?'data-link="'+r+'" ':"",n+=e.target?'data-target="'+e.target+'" ':"",n+='data-promo-id="'+c.promotionId+'">',n+='<div class="slide-background" style="'+m+" "+f+'">',!a.isMobile||c.contentOverlay||i.promoBackgroundOverride&&"BLANK"!==i.promoBackgroundOverride?(a.isMobile&&u||(n+=D(o)),n+=S(c,a.isMobile),n+="</div>"):(n+=D(o),n+="</div>",n+=S(c,a.isMobile));var v=P(c,i,e.id,t,!!e.Image);v&&(n+='<style type="text/css">'+v+"</style>"),n+="</div>"}else n+='<div id="slide-'+e.id+'" ',n+='class="'+d.join(" ")+'" ',n+=e.label?'data-label="'+e.label+'" ':"",n+=r?'data-link="'+r+'" ':"",n+=e.target?'data-target="'+e.target+'" ':"",n+='style="background-image: url('+o+');">',a.isMobile&&(n+=D(o)),n+="</div>";return n},D=function(e){var i="";return e&&(i+='<img src="'+e+'" class="placeholder-image pull-left">'),i},S=function(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:!1,t="";if(t+=i&&e.contentOverlay===!1&&e.imageOverlayColor?'<div class="container" style="background-color: rgb('+e.imageOverlayColor+')">':'<div class="container">',!i||e.contentOverlay){var a=e.contentPosition||"mid-mid";t+='<div class="slide-content flex flex-'+a+'">',t+=B(e),t+="</div>"}else e.contentWidth=12,t+=B(e);return t+="</div>"},B=function(e){var i="";if(e.htmlContent){var t=["slide-content-box"];e.contentWidth&&t.push("ddc-span"+e.contentWidth),e.textAlign&&t.push("text-"+e.textAlign),e.contentTextColor&&t.push("color-"+e.contentTextColor),i+='<div class="'+t.join(" ")+'">',i+=e.htmlContent,i+="</div>"}return i},P=function(e,i,t,a,n){var o="",r='[data-widget-id="'+a+'"] #slide-'+t;if(e.imageOverlayBlur||i.promoBackgroundBlur){var d=Math.round(e.imageOverlayBlur);i.promoBackgroundBlur&&!n&&(d=Math.round(10*parseFloat(i.promoBackgroundBlur))),d>0&&(o+=r+" .slide-background:before { ",o+="-webkit-filter: blur("+d+"px); ",o+="filter: blur("+d+"px); ",o+="} ")}return e.showHeadingTextShadow&&e.imageOverlayColor&&(o+=r+" .slide-heading { ",o+="text-shadow: 0 0 3px rgba("+e.imageOverlayColor+", .8); ",o+="} "),i.promoBackgroundBehavior&&!n&&(o+=r+" .slide-background { ",o+="stretch"===i.promoBackgroundBehavior?"background-size: 100% 100%; ":"background-repeat: repeat; ",o+="} "),o},I=function(){a.each(function(a,n){var o=e(n),l=o.find(".slide-container"),s=o.find(".slide"),c=o.find(".promo-slide"),f=o.find(".html-slide"),v=o.find(".slideControls"),b=v.find(".pager a"),y=v.find(".play"),C=y.attr("data-label-pause"),O=y.attr("data-label-resume"),x=v.find(".next"),D=v.find(".prev"),S=s.find(".btn:not(.slideshow-disclaimer-btn)"),B=s.find(".promo-text-link"),_=s.find(".promo-inventory-link"),P=e.getDataAttributes(l),I=window.navigator.userAgent.indexOf("MSIE ")>0||window.navigator.userAgent.indexOf("Trident/")>0||window.navigator.userAgent.indexOf("Edge/")>0;t={autoplay:P.autoPlay,autoplaySpeed:1e3*P.delay,arrows:P.showControls,fade:"fade"==P.transition,lazyLoad:"progressive",speed:1e3*P.interval,prevArrow:D,nextArrow:x,adaptiveHeight:i.client.isMobile},l.on("init",function(){var a="slideshow_background_fully_loaded";window.performance.mark(a),window.performance.measure(a),b.length>10&&b.hide();var n=s[0];0!==s[0].children.length&&(n=n.children[0]);var c=e(n).css("background-image").replace(/.*url\("|"\).*/g,""),k=new Image;k.onload=function(){var e="slideshow_background_fully_visible";window.performance.mark(e),window.performance.measure(e)},k.src=c,s.each(function(a,n){function o(){e(".slideshow-background").find(".slick-arrow, .pager a").click(function(){s.dialog("close")})}var r=e(n),d=r.width(),s=r.find(".slideshow-disclaimer"),c=r.find(".slideshow-disclaimer-btn"),u=s.data("width"),g=u?u:d;i.mobile?c.click(function(i){l.slick("slickPause"),e("#ddc-slidein-panel-slideshow-disclaimer-slidein .ddc-mobile-slidein-content-inner").html(s.html()),i.preventDefault()}):(s.dialog({autoOpen:!1,width:g,draggable:!1,resizable:!1,dialogClass:"slideshow-dialog",position:{my:"top",at:"top",of:l},open:function(){o()},close:function(){t.autoplay&&l.slick("slickPlay"),e(".slideshow-background").find(".slick-arrow, .pager a").unbind("click",o)}}),c.click(function(e){l.slick("slickPause"),s.dialog("open"),e.preventDefault()}))}),m(o,P.height),h(I,f,P.height,!0),v.fadeIn("fast");var w=l.find(".slick-active"),y=w.data("promo-id"),C=r(w);i.tracking&&i.tracking.ready?g(o,l,w.attr("id"),y,C):e.subscribe("ddc-event-tracking-ready",function(){g(o,l,w.attr("id"),y,C)}),B.on("click",function(t){var a=e(t.target).parents().closest(".promo-slide").data("promo-id"),n=d(t),r=function(){e(".promo-extra-details a").on("click",function(i){u(e(i.target),"PROMO_CLICK",a,"trim listing","link",!0,n)})};u(o,"PROMO_CLICK_DETAILS",a,"details","dialog",!0,n),l.slick("slickPause"),i.client.isMobile?(e(document).on("slideOpen",function(){r()}),P.autoPlay&&e(document).on("slideClose",function(){l.slick("slickPlay")})):e(document).on("ajaxDialogComplete",function(t,a,n){r(),P.autoPlay&&e(i.dialogs[n]).on("dialogclose",function(){l.slick("slickPlay")})})}),_.on("click",function(i){var t=e(i.target).attr("href"),a=e(i.target).attr("target"),n=e(i.target).parents().closest(".promo-slide").data("promo-id"),r=d(i);u(o,"PROMO_CLICK",n,"inventory","button",!0,r),p(t,a),i.preventDefault()})}),k(c),e(window).on("resize",function(){m(o,P.height),h(I,f,P.height)}),i.client.isMobile&&s.length>1&&e(window).on("orientationchange",function(){var e=l.slick("slickCurrentSlide");l.slick("unslick").slick(t).slick("slickGoTo",e)}),w({preferences:P,$currentWidget:o,$slideshow:l,$pagerLinks:b,$playButton:y}),P.showPause&&(y.on("click",function(i){var t=e(i.target),a=t.hasClass("paused"),n=function(e){t.find("span").text(e).end().toggleClass("paused")};a?(l.slick("slickPlay"),n(C),u(o,"Play",!1)):(l.slick("slickPause"),n(O),u(o,"Pause",!1)),i.preventDefault()}),l.on("beforeChange",function(){y.removeClass("paused")})),D.on("click",function(e){u(o,"Previous Slide",!1),e.preventDefault()}),x.on("click",function(e){u(o,"Next Slide",!1),e.preventDefault(e)}),l.on("swipe",function(e,i){var t=0,a=1;i.currentDirection==t?u(o,"Next Slide",!1):i.currentDirection==a&&u(o,"Previous Slide",!1)}),S.on("click",function(i){{var t=e(i.target).closest(".slide"),a=t.data("promo-id");t[0].id.replace("slide-","")}if(!a){var n=e(i.target).attr("href"),r=e(i.target).attr("target");u(o,"click",t.attr("id").replace("slide-",""),n,"Button",!0),p(n,r)}}),l.on("click",function(i){if(!i.target.href){var t=l.slick("slickCurrentSlide")+1,a=e(i.target).closest(".slide"),n=a.data("label"),d=a.data("link"),s=a.data("target")||"_self",c=a.data("promo-id"),g=c?"PROMO_CLICK":"SLIDE_CLICK",f=r(a);if(dataLayer.push({event:"ddc.slideshow.click",eventData:{element:i.target,name:n,position:t,type:"html"}}),d){var m=d,v=a[0].id,h=void 0;v&&(h=v.replace("slide-","")),u(o,g,h,m,"SLIDE",!0,f),p(d,s)}}}),l.on("afterChange",function(){var i=e(this).find(".slick-active")[0];if(i){var t=i.getAttribute("data-promo-id"),a=r(i);i.id&&g(o,l,i.id,t,a)}}),l.slick(t)})};e(document).ready(function(){I(),i&&i.siteSettings&&i.siteSettings.isEO&&a.each(function(){b(e(this))||y(e(this))})})}(jQuery,window.DDC);