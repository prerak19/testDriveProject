"use strict";function _toConsumableArray(e){if(Array.isArray(e)){for(var t=0,r=Array(e.length);t<e.length;t++)r[t]=e[t];return r}return Array.from(e)}var _extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)Object.prototype.hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};DDC.classes.namespace("tracking.shift.decorators"),tracking.shift.decorators.GlobalDecorator=function(e,t,r){tracking.framework.runtime.EventHandlerDecorator.call(this,e,t,r)},DDC.classes.extend(tracking.shift.decorators.GlobalDecorator,tracking.framework.runtime.EventHandlerDecorator),tracking.shift.decorators.GlobalDecorator.prototype.logCategory="GlobalDecorator",tracking.shift.decorators.GlobalDecorator.prototype.handleTypedSearch=function(e){e.typedSearchContent=e.typedSearchContent.replace(/([\s,\|]+)/g,"|"),this.delegate.handleTypedSearch(e)},tracking.shift.decorators.GlobalDecorator.prototype.handleFormInitiation=function(e){return"INVENTORY_SEARCH"===e.trackingId?void this.log.info("Consuming form initiation event"):void this.delegate.handleFormInitiation(e)},tracking.shift.decorators.GlobalDecorator.prototype.handleFormSubmission=function(e){return e.validate&&"INVENTORY_SEARCH"!==e.trackingId?void this.delegate.handleFormSubmission(e):void this.log.info("Consuming form submission event")},tracking.shift.decorators.GlobalDecorator.prototype.handleClickToCall=function(e){var t=e.clickToCallDepartment,r=e.phoneNumber,a=e.element,i=["Sales","Service","Parts"],n="Other";if(i.indexOf(t.toLowerCase())>-1)n=t;else{var s=this.window.document.querySelector('[data-click-to-call][data-click-to-call-phone="'+r+'"]'),o=s&&s.dataset.clickToCall;if(o){o=o.toLowerCase();for(var l=0;l<i.length;l++)if(o.indexOf(i[l].toLowerCase())>-1){n=i[l];break}}}return this.delegate.handleClickToCall({clickToCallDepartment:n,phoneNumber:r,element:a})},DDC.classes.namespace("tracking.shift.handlers"),tracking.shift.handlers.AbstractEventHandler=function(e,t){tracking.framework.runtime.EventHandler.call(this,e,t),this.scriptLocation=void 0,this.scriptObjectName=void 0,this.clientId=void 0,this.dealerCodeType=void 0,this.retailerId=void 0,this.providerId=void 0,this.dataLayerName=void 0,this.dealerAreaCode=void 0,this.formTrackingIdMapping={TEST_DRIVE:"Test Drive",INFO_REQUEST:"Request More Info",EMAIL_A_FRIEND:"Email a Friend",SPECIALS_EMAIL_A_FRIEND:"Email a Friend",CONTACT:"General Contact",PREQUAL:"Prequal",PARTS_ORDER:"Parts",SCHEDULE_A_TEST_DRIVE:"Test Drive",SERVICE_APPT:"Schedule Service",BODYSHOP:"Service",EMPLOYMENT:"Employment",TRADE_IN:"Trade In",FINANCE:"Finance",SPECIALS_INFO_REQUEST:"Specials",INVENTORYFINDER:"Vehicle Finder",MAKE_AN_OFFER:"Make an Offer",SHOWROOM:"Request More Info",VEHICLE_LEAD:"Request More Info",INVENTORY_SEARCH_LEAD:"Vehicle Finder",MSLP:"Request More Info",GLOBAL_VEHICLE_INCENTIVE_LEAD:"Specials",BUILD_AND_PRICE:"Get a Quote",EPRICE:"Get a Quote",DEFAULT:"Other"},this.inventoryTypeMapping={NEW:"New",USED:"Used",CERTIFIED:"CPO",ALL:"Mixed",DEFAULT:""},this.pageAliasMapping={"^INDEX$":"Home",".*INVENTORY_LISTING.*":"Vehicle Listing",".*HOURS.*":"Hours & Directions",".*DIRECTIONS.*":"Hours & Directions",".*INCENTIVES.*":"OEM Incentives","^AUTO_.*DETAILS.*":"Vehicle Details",".*404.*":"Page Not Found",".*SERVICE_LEAD.*":"Service",".*MAINTENANCE_MENU.*":"Service",".*SCHEDULE_SERVICE.*":"Schedule Service",".*MODEL_SPECIFIC_INDEX.*":"Showroom",".*SHOWROOM.*":"Showroom",".*PARTS_LEAD.*":"Parts",".*FINANCE_LEAD.*":"Finance",".*FINANCE_APPLICATION.*":"Finance",".*INCENTIVES_LISTING.*":"OEM Incentives",".*LEAD_TRADE_IN.*":"Trade In",".*PROMOTIONS_LISTING_PARTS.*":"Parts Specials",".*PROMOTIONS_LISTING_SERVICE.*":"Service Specials",".*SCHEDULE_AN_APPOINTMENT.*":"Schedule Service",".*SERVICE_ACCESSORIES.*":"Accessories",".*SERVICE_AIRFILTERS.*":"Cabin Air Filter",".*SERVICE_BATTERIES.*":"Batteries",".*SERVICE_BRAKES.*":"Brakes",".*SERVICE_CENTER.*":"Service Home",".*SERVICE_COURTESY_VEHICLES.*":"Courtesy Vehicles",".*SERVICE_MAINTENANCE.*":"Maintenance",".*SERVICE_PARTS(?!_SPECIALS).*":"Parts",".*SERVICE_PARTS_SPECIALS.*":"Parts Specials",".*SERVICE_PREMIUM_OIL.*":"Premium Oil",".*SERVICE_SPECIALS.*":"Service Specials",".*SERVICE_TIRES.*":"Tire Store",".*SPECIALS_LISTING_SERVICE.*":"Service Specials",".*SPECIALS_LISTING_PARTS.*":"Dealer Specials",".*SPECIALS_LISTING.*":"Dealer Specials",".*ABOUT_DEFAULT.*":"About Us",".*NEWS_DEFAULT.*":"Blog",".*CONTACT_DEFAULT.*":"Contact Us",".*STAFF_LISTING.*":"About Us",".*BLOG_VIDEO.*":"Blog",".*BROCHURE_DEFAULT.*":"Brochure",".*TEST_DRIVE.*":"Test Drive",".*WARRANTY.*":"Warranty","^DEFAULT$":"Other"},this.pageBrandMapping={CLLC:"CDJR",JAG:"Jaguar",KIA:"Kia",LR:"Land Rover",MAZDA:"Mazda",MBZ:"Mercedes",AR:"AlfaRomeo",FIAT:"Fiat",PORSCHE:"Porsche",TOYOTA:"Toyota",LEXUS:"Lexus",SUBARU:"Subaru",MASERATI:"Maserati",BMW:"BMW",VW:"VW"},this.pageName=void 0,this.fuelTypeMapping={GASOLINE:"Gasoline",DIESEL:"Diesel",ELECTRIC:"Electric",HYBRID:"Hybrid",DEFAULT:"Gasoline"}},DDC.classes.extend(tracking.shift.handlers.AbstractEventHandler,tracking.framework.runtime.EventHandler),tracking.shift.handlers.AbstractEventHandler.prototype.logCategory="AbstractEventHandler",tracking.shift.handlers.AbstractEventHandler.prototype.getScriptLocation=function(){return this.scriptLocation},tracking.shift.handlers.AbstractEventHandler.prototype.setScriptLocation=function(e){this.scriptLocation=e},tracking.shift.handlers.AbstractEventHandler.prototype.getScriptObjectName=function(){return this.scriptObjectName},tracking.shift.handlers.AbstractEventHandler.prototype.setScriptObjectName=function(e){this.dataLayerName=e+"DataLayer",this.scriptObjectName=e},tracking.shift.handlers.AbstractEventHandler.prototype.getClientId=function(){return this.clientId},tracking.shift.handlers.AbstractEventHandler.prototype.setClientId=function(e){this.clientId=e},tracking.shift.handlers.AbstractEventHandler.prototype.getDealerCodeType=function(){return this.dealerCodeType},tracking.shift.handlers.AbstractEventHandler.prototype.setDealerCodeType=function(e){this.dealerCodeType=e},tracking.shift.handlers.AbstractEventHandler.prototype.getRetailerId=function(){return this.retailerId},tracking.shift.handlers.AbstractEventHandler.prototype.setRetailerId=function(e){this.retailerId=e},tracking.shift.handlers.AbstractEventHandler.prototype.getProviderId=function(){return this.providerId},tracking.shift.handlers.AbstractEventHandler.prototype.setProviderId=function(e){this.providerId=e},tracking.shift.handlers.AbstractEventHandler.prototype.setPageAliasMapping=function(e){if(void 0!==e&&"object"===("undefined"==typeof e?"undefined":_typeof(e)))for(var t in e)e.hasOwnProperty(t)&&(this.pageAliasMapping[t]=e[t])},tracking.shift.handlers.AbstractEventHandler.prototype.initialize=function(){this.log.info("initializing..."),this.log.info("injecting "+this.scriptLocation+" into page"),function(e,t,r,a,i,n,s){e["ShiftAnalyticsObject"+("sd"!==i?i.toUpperCase():"")]=i,e[i]=e[i]||function(){(e[i].q=e[i].q||[]).push(arguments)},e[i].l=1*new Date,n=t.createElement(r),s=t.getElementsByTagName(r)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(this.window,this.window.document,"script",this.scriptLocation,this.scriptObjectName),this.log.info("sending create event"),this.window[this.scriptObjectName]("create",this.clientId,this.retailerId,this.providerId),this.log.info("initialized")},tracking.shift.handlers.AbstractEventHandler.prototype.mapFormTrackingId=function(e){e=e&&e.toUpperCase();var t=this.formTrackingIdMapping[e];return void 0===t&&(t=this.formTrackingIdMapping.DEFAULT),t},tracking.shift.handlers.AbstractEventHandler.prototype.mapInventoryType=function(e,t,r){var a=e?e.toUpperCase():"DEFAULT",i=this.inventoryTypeMapping[a];return void 0===i&&(i="used"===t&&r?this.inventoryTypeMapping.CERTIFIED:this.inventoryTypeMapping[t.toUpperCase()]),i},tracking.shift.handlers.AbstractEventHandler.prototype.mapPageAlias=function(e){e=e&&e.toUpperCase();for(var t in this.pageAliasMapping)if(this.pageAliasMapping.hasOwnProperty(t)&&void 0!==this.pageAliasMapping[t]&&e.match(t))return this.pageAliasMapping[t];return this.pageAliasMapping["^DEFAULT$"]},tracking.shift.handlers.AbstractEventHandler.prototype.mapPageBrand=function(){var e=this.dealerCodeType;return""===e&&void 0===e||"string"!=typeof e?void 0:"gmca"==e.toLowerCase()?DDC.dataLayer.site.franchises.length>1?"GM":DDC.dataLayer.site.franchises[0].toUpperCase():this.pageBrandMapping[e.toUpperCase()]||""},tracking.shift.handlers.AbstractEventHandler.prototype.buildDataForPageView=function(){return{}},tracking.shift.handlers.AbstractEventHandler.prototype.compositeTypeQueryFacet=function(e){return e.compositeType?"used"===e.compositeType?"all":e.compositeType:this.page.isVehicleListingPage()?this.page.isNewVehiclePage()?"new":this.page.isCertifiedUsedVehiclePage()?"certified":"all":void 0},tracking.shift.handlers.AbstractEventHandler.prototype.sendData=function(e,t){var r=this;this.window[this.scriptObjectName](function(){r.window[r.dataLayerName]=e}),void 0!==t?this.window[this.scriptObjectName]("send",t):this.window[this.scriptObjectName]("send")},tracking.shift.handlers.AbstractEventHandler.prototype.handlePageView=function(e){this.pageName=this.mapPageAlias(e.alias);var t=this.buildDataForPageView(e.alias);this.sendData(t,"pageview")},tracking.shift.handlers.AbstractEventHandler.prototype.handleSlideshowClick=function(e){this.sendData({carouselClick:{assetPosition:e.position,assetName:e.name},events:"carouselClick"})},tracking.shift.handlers.AbstractEventHandler.prototype.mapFuelType=function(e){var e=this.fuelTypeMapping[e];return void 0===e&&(e=this.fuelTypeMapping.DEFAULT),e},tracking.shift.handlers.AbstractEventHandler.prototype.setDealerAreaCode=function(e){this.dealerAreaCode=e},tracking.shift.handlers.AbstractEventHandler.prototype.formDisplayType=function(e){var t=null;return e.hasOwnProperty("isModal")&&(t=e.isModal?"modal":"in-page"),t},DDC.classes.namespace("tracking.shift.handlers"),tracking.shift.handlers.ShiftEventHandler=function(e,t){tracking.shift.handlers.AbstractEventHandler.call(this,e,t),this.accelerateInitialCalcStart=!1,this.accelerateLeadFormStart=!1,this.accelerateInitialClick=!1},DDC.classes.extend(tracking.shift.handlers.ShiftEventHandler,tracking.shift.handlers.AbstractEventHandler),tracking.shift.handlers.ShiftEventHandler.prototype.setFilterValueToSend=function(e,t){var r=e?e:"All";return r.replace(/,/g,t)},tracking.shift.handlers.ShiftEventHandler.prototype.mapPageAlias=function(e){return this.page.isModelShowroomPage()?"Model Showroom":tracking.shift.handlers.AbstractEventHandler.prototype.mapPageAlias.call(this,e)},tracking.shift.handlers.ShiftEventHandler.prototype.logCategory="ShiftEventHandler",tracking.shift.handlers.ShiftEventHandler.prototype.buildDataForPageView=function(e){var t=this.page.dataLayerProperty("page.attributes.locale"),r={pageBrand:this.mapPageBrand(),pageType:this.pageName,websiteTier:this.page.dataLayerProperty("site.siteInfo.tier").replace("tier","Tier "),language:t.indexOf("_")>-1?t.substr(0,t.indexOf("_")):t,dealerZipCode:this.page.dataLayerProperty("dealership.postalCode"),dealerState:this.page.dataLayerProperty("dealership.stateProvince"),sessionId:this.page.dataLayerProperty("user.sessionId"),dealerCity:this.page.dataLayerProperty("dealership.city"),dealerName:this.page.dataLayerProperty("dealership.dealershipName"),userZipCode:this.page.dataLayerProperty("user.userPostalCode"),userCity:this.page.dataLayerProperty("user.userCity"),userState:this.page.dataLayerProperty("user.userRegion"),siteTechnologyVersion:this.page.dataLayerProperty("site.design.variationId")};if(this.page.isVehicleDetailPage(e)){var a=this.page.dataLayerProperty("vehicles.0"),i=a.inventoryType,n=a.modelYear,s=a.make,o=a.model,l=a.trim,c=a.engine,d=a.transmission,p=a.interiorColor,h=a.exteriorColor,f=a.vin,y=a.msrp,E=a.internetPrice,g=a.fuelType,u=a.stockNumber,v=a.newOrUsed,m=a.certified;r.vehicleDetails={status:this.mapInventoryType(i,v,m),year:n,make:s,model:o,trim:l,engine:c,transmission:d,interiorColor:p,exteriorColor:h,vin:f,msrp:y,displayedPrice:E,fuelType:this.mapFuelType(g),stockNumber:u}}return this.page.isErrorPage(e)&&(r.errorCode="404"),this.dealerAreaCode&&("gmca"===this.dealerCodeType.toLowerCase()?r.dealerBac=this.dealerAreaCode:"lexus"===this.mapPageBrand().toLowerCase()?r.dealerLDA=this.dealerAreaCode:r.dealerTDA=this.dealerAreaCode),r},tracking.shift.handlers.ShiftEventHandler.prototype.handleTypedSearch=function(e){var t=e.typedSearchContent;this.sendData({formType:this.mapFormTrackingId(e.trackingId),typedSearchContent:t,events:"typedSearch"})},tracking.shift.handlers.ShiftEventHandler.prototype.handleFormConfirmation=function(e){var t=e.trackingId,r=e.params,a=["EMAIL","PHONE","TEXT"],i={sessionId:this.page.dataLayerProperty("user.sessionId"),formType:this.mapFormTrackingId(e.trackingId),leadType:"lead",leadId:this.page.dataLayerProperty("confirmation.formEventId"),events:"formSubmission",formVehicle:{},displayType:this.formDisplayType(e)},n=this.page.dataLayerProperty("confirmation.preferredContact")&&this.page.dataLayerProperty("confirmation.preferredContact").toUpperCase()||null;if(i.prefContact=n&&(a.indexOf(n)>-1?n:"other"),this.page.dataLayerProperty("confirmation.vehicle")){var s=this.page.dataLayerProperty("confirmation.vehicle"),o=s.inventoryType,l=s.modelYear,c=s.make,d=s.model,p=s.trim,h=s.engine,f=s.transmission,y=s.interiorColor,E=s.exteriorColor,g=s.vin,u=s.msrp,v=s.internetPrice,m=s.fuelType,S=s.certified;i.formVehicle={status:this.mapInventoryType("true"===S||S===!0?"CERTIFIED":o),year:l,make:c,model:d,trim:p,engine:h,transmission:f,interiorColor:y,exteriorColor:E,vin:g,msrp:u,displayedPrice:v,fuelType:m}}if("TRADE_IN"===t){var C=r.split("&").filter(function(e){return e.indexOf("year")>-1||e.indexOf("make")>-1||e.indexOf("model")>-1}).reduce(function(e,t){var r=t.substr(0,t.indexOf("=")),a=r.indexOf("year")>-1?"year":r.indexOf("make")>-1?"make":"model",i=t.substr(t.indexOf("=")+1);return e[a]=i,e},{});i.tradeIn={year:C.year,make:C.make,model:C.model}}var I=sessionStorage.getItem("cemConsentDefaultValue"),T=this.page.dataLayerProperty("confirmation.cemConsent");null!=I&&null!=T&&(i.formOptIn="YES_I_CONSENT"===T?"true"===I?"in-implicit":"in-explicit":"out",sessionStorage.removeItem("cemConsentDefaultValue")),this.sendData(i)},tracking.shift.handlers.ShiftEventHandler.prototype.handleFormOnPage=function(e){var t=this.page.dataLayerProperty("vehicles")||[],r={formType:this.mapFormTrackingId(e.trackingId),events:"formShown",displayType:this.formDisplayType(e),formVehicle:{}};if(t.length>0){var a=e.element,i=a.querySelector('[data-id="vehicleId"]')||a.querySelector('[data-id="itemId"]'),n=i?i.value:null;if(n){var s=t.filter(function(e){return e.uuid===n})[0],o=s.inventoryType,l=s.modelYear,c=s.make,d=s.model,p=s.trim,h=s.engine,f=s.transmission,y=s.interiorColor,E=s.exteriorColor,g=s.vin,u=s.internetPrice,v=s.msrp,m=s.fuelType,S=s.bodyStyle,C=s.driveLine,I=s.certified;r.formVehicle={status:this.mapInventoryType("true"===I||I===!0?"CERTIFIED":o),year:l,make:c,model:d,trim:p,engine:h,transmission:f,interiorColor:y,exteriorColor:E,vin:g,msrp:v,displayedPrice:u,fuelType:m,bodyStyle:S,driveTrain:C}}}e.isLead&&this.sendData(r)},tracking.shift.handlers.ShiftEventHandler.prototype.handleFormInitiation=function(e){var t=this.page.dataLayerProperty("vehicles")||[],r={formType:this.mapFormTrackingId(e.trackingId),events:"formInitiation",formVehicle:{},displayType:this.formDisplayType(e)};if(t.length>0){var a=e.element,i=a.querySelector('[data-id="vehicleId"]')||a.querySelector('[data-id="itemId"]'),n=i?i.value:null;if(n){var s=t.filter(function(e){return e.uuid===n})[0],o=s.inventoryType,l=s.modelYear,c=s.make,d=s.model,p=s.trim,h=s.engine,f=s.transmission,y=s.interiorColor,E=s.exteriorColor,g=s.vin,u=s.internetPrice,v=s.msrp,m=s.fuelType,S=s.bodyStyle,C=s.driveLine,I=s.certified;r.formVehicle={status:this.mapInventoryType("true"===I||I===!0?"CERTIFIED":o),year:l,make:c,model:d,trim:p,engine:h,transmission:f,interiorColor:y,exteriorColor:E,vin:g,msrp:v,displayedPrice:u,fuelType:m,bodyStyle:S,driveTrain:C}}}var T=document.querySelector('[data-id="cemConsent"]');T&&sessionStorage.setItem("cemConsentDefaultValue",T.defaultChecked),this.sendData(r)},tracking.shift.handlers.ShiftEventHandler.prototype.handleOfferClick=function(e){var t=this.page.dataLayerProperty("page.attributes")||[],r=t.incentives,a=r.filter(function(t){var r=t.id;return r===e.offerId}),i={offerId:e.offerId,offerName:e.offerName};if(a&&a.length>0){var n=a[0],s=n.type,o=n.currentVehicleModel,l=n.currentVehicleBodyStyle,c=n.applicableTrims,d=n.applicableYear,p=n.applicableMake,h=o;p&&o&&o.match(p)&&(h=o.replace(p+" ",""));var f=void 0;c&&c.length>0&&(f=c.reduce(function(e,t){if(t.match(d+" "+p+" "+o+" "+l)){var r=t.replace(d+" "+p+" "+o+" "+l+" ","");return[].concat(_toConsumableArray(e),[r])}return[].concat(_toConsumableArray(e))},[]).join("|"));var y={offerType:s&&s.toLowerCase()||null,vehicleModel:h,vehicleBodyStyle:l,vehicleYear:d,vehicleTrim:f};_extends(i,y)}this.sendData({offerClick:i,events:"offerClick"})},tracking.shift.handlers.ShiftEventHandler.prototype.handleClickToCall=function(e){var t={clickToCallDepartment:e.clickToCallDepartment,events:"clickToCall"};this.sendData(t)},tracking.shift.handlers.ShiftEventHandler.prototype.handleFilterSearch=function(e){var t=this.compositeTypeQueryFacet(e.queryFacets),r=e.queryFacets.internetPrice||e.queryFacets.msrp,a={status:this.mapInventoryType(t),year:this.setFilterValueToSend(e.queryFacets.year,", "),make:this.setFilterValueToSend(e.queryFacets.make,", "),model:this.setFilterValueToSend(e.queryFacets.model,", "),trim:this.setFilterValueToSend(e.queryFacets.trim,", "),color:this.setFilterValueToSend(e.queryFacets.normalExteriorColor,", "),minPrice:r?r.split("-")[0]:"All",maxPrice:r?r.split("-")[1]:"All",bodyStyle:this.setFilterValueToSend(e.queryFacets.bodyStyle||e.queryFacets.normalBodyStyle,", "),features:this.setFilterValueToSend(e.queryFacets.gvOption," | ")};this.sendData({countSearchResults:e.resultCount,filterSearch:a,events:"filterSearch"})},tracking.shift.handlers.ShiftEventHandler.prototype.handleVehicleDetailView=function(e){var t=this.buildDataForPageView(e.alias);t.pageType=this.mapPageAlias(e.alias),t.displayType="in-page",t.events="detailsView",this.sendData(t)},tracking.shift.handlers.ShiftEventHandler.prototype.handleGetDirections=function(){this.sendData({events:"getDirections"})},tracking.shift.handlers.ShiftEventHandler.prototype.buildDataForDigitalRetailing=function(e){return e?{dealId:this.page.dataLayerProperty("user.sessionId"),provider:"DR Cox Automotive",vehicleYear:e.modelYear,vehicleMake:e.make,vehicleModel:e.model,vehicleVin:e.vin,vehicleStatus:e.inventoryType}:void 0},tracking.shift.handlers.ShiftEventHandler.prototype.getEventByElement=function(e){var t={send:!1},r=e.eventName;if(r)switch(r){case"DR_PAYMENT_TYPE_CHANGED":case"DR_DOWN_PAYMENT_CHANGED":case"DR_CREDIT_TIER_CHANGED":case"DR_PAYMENT_TERM_CHANGED":case"DR_LEASE_ANNUAL_MILES_CHANGED":case"DR_OFFER_PRICE_CHANGED":this.accelerateInitialCalcStart||(this.accelerateInitialCalcStart=!0,t.event="drPaymentCalcStart");break;case"DR_CONTINUE_TO_SDP_CLICKED":t.event="drPaymentCalcStart,drPaymentCalcFinish";break;case"DR_LEAD_FORM_FIRSTNAME_CHANGED":case"DR_LEAD_FORM_LASTNAME_CHANGED":case"DR_LEAD_FORM_EMAIL_CHANGED":case"DR_LEAD_FORM_PHONE_CHANGED":this.accelerateLeadFormStart||(this.accelerateLeadFormStart=!0,t.event="drLeadFormStart");break;case"DR_OFFER_SUBMISSION_CLICKED":t.event="drLeadFormFinish";break;case"DR_TRADEIN_ESTIMATE_DISPLAYED":t.event="drTradeInEval";break;case"DR_SDP_LEAVE_BUTTON_CLICKED":t.event="drDropSave";break;case"DR_CREDIT_APP_SUCCESS_DISPLAYED":t.event="drCreditApp";break;case"DR_SHOPPER_COMPLETES_MENU_PRODUCTS":t.event="drFiFinish";break;case"DR_TEST_DRIVE_REQUESTED":t.event="drApptSched"}return t.send=void 0!==t.event,t},tracking.shift.handlers.ShiftEventHandler.prototype.handleAccelerateWidgetEvents=function(e){var t=this.getEventByElement(e);t.send&&this.sendData({events:t.event,digRet:this.buildDataForDigitalRetailing(this.page.dataLayerProperty("vehicles.0"))}),this.accelerateInitialClick||"display"===e.action||(this.accelerateInitialClick=!0,this.sendData({events:"drInitialClick",digRet:this.buildDataForDigitalRetailing(this.page.dataLayerProperty("vehicles.0"))}))},tracking.shift.handlers.ShiftEventHandler.prototype.handleServiceOfferClick=function(e){if("ws-toyota-offers"===e.widgetName){var t=new Date(e.offerEndDate)>new Date?"active":"expired",r={offerStatus:t,offerName:e.offerTitle,offerExpire:e.offerEndDate,offerType:e.offerType||null,offerCategory:e.offerCategory||null};this.sendData({serviceOfferClick:r,events:"serviceOfferClick"})}},tracking.shift.handlers.ShiftEventHandler.prototype.handleAllWidgetUserEvents=function(e){switch(e.widgetName){case"digital-retailing-cox":this.handleAccelerateWidgetEvents(e);break;case"ws-toyota-offers":this.handleServiceOfferClick(e)}},tracking.shift.handlers.ShiftEventHandler.prototype.handleSpecialsEvent=function(e){if("string"==typeof e.specialCategory&&"service"===e.specialCategory.toLowerCase()&&"click"===e.specialEvent){var t=new Date(e.specialEndDate)>new Date?"active":"expired",r={offerStatus:t,offerName:e.specialDescription,offerExpire:e.specialEndDate};this.sendData({serviceOfferClick:r,events:"serviceOfferClick"})}};