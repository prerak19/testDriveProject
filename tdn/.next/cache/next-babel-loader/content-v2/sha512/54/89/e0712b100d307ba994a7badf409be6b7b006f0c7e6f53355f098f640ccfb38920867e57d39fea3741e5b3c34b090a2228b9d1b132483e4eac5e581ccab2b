{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/encora/Documents/projects/testDrive/tdn/components/pick-location/pickLocation.js\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\n/** @format */\nimport Image from 'next/image';\nimport React, { useState, useEffect } from 'react';\nimport styles from '../../styles/Home.module.css';\nimport btnStyles from './../../styles/Btn.module.css';\nimport SechduleContent from './../../common-component/sechduleDesc';\nimport StepBar from './../../components/step-bar/stepBar';\nimport StepBarV1 from './../../components/step-bar/stepBarV1';\nimport StepbarV1Style from './../../styles/StepBarV1.module.css';\nimport { useCarData, useUpdateCarData } from './../../contexts/CarDataContext';\nimport Axios from 'axios';\nimport { resolveHref } from 'next/dist/next-server/lib/router/router';\n\nconst pickLocation = props => {\n  const {\n    0: isSelected,\n    1: setisSelected\n  } = useState(false);\n  const {\n    0: rooftops,\n    1: setRooftops\n  } = useState([]);\n  const {\n    0: rooftopCars,\n    1: setRooftopCars\n  } = useState([]);\n  const {\n    0: locationDealer,\n    1: setlocationDealer\n  } = useState(true);\n  const {\n    0: btnDisabled,\n    1: setBtnDisabled\n  } = useState(false);\n  const {\n    0: userData,\n    1: setUserData\n  } = useState({\n    address: '',\n    city: '',\n    state: '',\n    zip: ''\n  });\n  const {\n    0: error,\n    1: setError\n  } = useState({\n    address: false,\n    city: false,\n    state: false,\n    zip: false\n  }); // const { rooftopData } = props;\n  // const selectedCar = useCarData();\n\n  const {\n    selectedCarData\n  } = props;\n  useEffect(() => {\n    props.scrollToTop();\n  }, [props.isActive]); // const getCarData = () => {};\n\n  useEffect(() => {\n    if (props.isActive === true) {\n      Axios.get(`/api/getRooftops`).then(response => {\n        setRooftops(response.data);\n      }, error => {\n        console.log(error);\n      });\n    }\n  }, [props.isActive]);\n\n  const validateForm = () => {\n    let validation = true;\n    let error = {\n      address: false,\n      city: false,\n      state: false,\n      zip: false\n    };\n\n    if (userData.address.length < 3) {\n      validation = false;\n      error.address = true;\n    }\n\n    if (userData.city.length < 2) {\n      validation = false;\n      error.city = true;\n    }\n\n    if (userData.state.length < 2) {\n      validation = false;\n      error.state = true;\n    }\n\n    if (!/(^\\d{5}$)|(^\\d{5}-\\d{4}$)/.test(userData.zip)) {\n      validation = false;\n      error.zip = true;\n    }\n\n    setError(error);\n    return validation;\n  };\n\n  const handleChange = e => {\n    const newData = _objectSpread(_objectSpread({}, userData), {}, {\n      [e.target.name]: e.target.value\n    });\n\n    setUserData(newData); // data({ userData: newData });\n\n    setError(_objectSpread(_objectSpread({}, error), {}, {\n      [e.target.name]: false\n    }));\n  };\n\n  const setLocalUserData = e => {\n    e.preventDefault();\n    const {\n      address,\n      city,\n      state,\n      zip\n    } = userData;\n    const driveForm = localStorage.getItem('driveForm');\n    let dupDriveForm = JSON.parse(driveForm);\n    Axios.post('/api/user/updateLocation', {\n      UserID: localStorage.getItem('userId'),\n      Address: `${address}, ${city}, ${state} - ${zip} `,\n      AtHome: !locationDealer\n    }).then(res => {\n      if (res.data) {\n        let obj = _objectSpread(_objectSpread({}, dupDriveForm), {}, {\n          address: `${address}, ${city}, ${state} - ${zip} `,\n          atHome: !locationDealer\n        });\n\n        localStorage.setItem('driveForm', JSON.stringify(obj));\n        setBtnDisabled(false);\n        props.setNextPage();\n        props.nextStep();\n      }\n    }).catch(err => console.log(err));\n  };\n\n  const getCarData = async id => {\n    try {\n      let data = {};\n      await Axios.get(`/api/get-car/${id}`).then(response => {\n        data = response.data;\n      }, error => {\n        console.log(error);\n      });\n      return data;\n    } catch (err) {\n      console.log(err);\n      return [];\n    }\n  };\n\n  useEffect(async () => {\n    if (props.isActive == true && props.rooftopData && props.rooftopData.fields && props.rooftopData.fields.Cars) {\n      let newCars = [];\n\n      for (let i = 0; i < props.rooftopData.fields.Cars.length; i++) {\n        let data = await getCarData(props.rooftopData.fields.Cars[i]);\n        newCars.push(data);\n\n        if (i >= 2) {\n          break;\n        }\n      }\n\n      setRooftopCars(newCars);\n    }\n  }, [props.rooftopData, props.isActive]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: `${props.currentPage === 3 ? 'block' : 'none'}`\n    },\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"row justify-content-center\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"col-sm-12 col-md-7 col-lg-7 min-width-desktop\",\n          children: [/*#__PURE__*/_jsxDEV(SechduleContent, {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: `${styles.progressContent}  my-5`,\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: StepbarV1Style.hideForMobile,\n              children: /*#__PURE__*/_jsxDEV(StepBarV1, _objectSpread({}, props), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 177,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 176,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: StepbarV1Style.hideForLaptop,\n              children: /*#__PURE__*/_jsxDEV(StepBarV1, _objectSpread({\n                mobile: true\n              }, props), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 180,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 179,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 174,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"my-4\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"pick-location-desc\",\n              children: /*#__PURE__*/_jsxDEV(\"h2\", {\n                children: \"I want to Pickup Location\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 186,\n                columnNumber: 17\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 185,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 184,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"tab_container\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"button_Tab\",\n                  children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: locationDealer ? 'active' : '',\n                    onClick: () => {\n                      if (locationDealer) return;\n                      setlocationDealer(true);\n                    },\n                    children: \"Dealership\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 202,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                    type: \"button\",\n                    className: locationDealer ? '' : 'active',\n                    onClick: () => {\n                      if (!locationDealer) return;\n                      setlocationDealer(false);\n                    },\n                    children: \"Home\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 212,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 192,\n                  columnNumber: 19\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 191,\n                columnNumber: 17\n              }, this), locationDealer ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"dealershipContent\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-sm-12 col-md-4 col-lg-4\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"mapContent\",\n                        children: /*#__PURE__*/_jsxDEV(\"iframe\", {\n                          className: \"confirmMap\",\n                          src: props.rooftopData && props.rooftopData.fields && props.rooftopData.fields.Geolocation,\n                          frameBorder: \"0\",\n                          allowFullScreen: \"\",\n                          \"aria-hidden\": \"false\",\n                          tabIndex: \"0\",\n                          width: \"100%\",\n                          height: \"220px\"\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 236,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 234,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 233,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-sm-12 col-md-8 col-lg-8\",\n                      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"row\",\n                        children: rooftopCars && rooftopCars[0] ? rooftopCars.map(car => /*#__PURE__*/_jsxDEV(_Fragment, {\n                          children: [' ', /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"col-sm-12 col-md-4 col-lg-4 p-0 displaynone\",\n                            children: /*#__PURE__*/_jsxDEV(Image, {\n                              className: \"pickLocationImg\",\n                              src: car.fields.Image[0].thumbnails.large.url,\n                              alt: \"\",\n                              width: 250,\n                              height: 150,\n                              layout: \"responsive\"\n                            }, void 0, false, {\n                              fileName: _jsxFileName,\n                              lineNumber: 260,\n                              columnNumber: 37\n                            }, this)\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 259,\n                            columnNumber: 35\n                          }, this)]\n                        }, void 0, true)) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                          children: /*#__PURE__*/_jsxDEV(\"div\", {\n                            className: \"col-sm-12 col-md-4 col-lg-4 p-0 displaynone\",\n                            children: \"Loading . . .\"\n                          }, void 0, false, {\n                            fileName: _jsxFileName,\n                            lineNumber: 275,\n                            columnNumber: 33\n                          }, this)\n                        }, void 0, false)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 254,\n                        columnNumber: 27\n                      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"dealarDesc\",\n                        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n                          children: props.rooftopData && props.rooftopData.fields && props.rooftopData.fields.Name\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 282,\n                          columnNumber: 29\n                        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                          children: props.rooftopData && props.rooftopData.fields && props.rooftopData.fields.Address\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 287,\n                          columnNumber: 29\n                        }, this)]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 281,\n                        columnNumber: 27\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 253,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 232,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 231,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 230,\n                columnNumber: 19\n              }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"HomeContent\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"homeLocationForm\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"row\",\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-sm-12 col-md-6 col-lg-6 col-xl-6\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"form-group\",\n                        children: /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"text\",\n                          className: \"form-control\",\n                          placeholder: \"Address line \",\n                          id: \"Addressline \",\n                          name: \"address\",\n                          onChange: handleChange,\n                          required: true,\n                          value: userData.address,\n                          style: {\n                            background: error.address ? '#FFF1F1' : '',\n                            border: error.address ? '1px solid #FA6767' : ''\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 319,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 318,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 317,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-sm-12 col-md-6 col-lg-6 col-xl-6\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"form-group\",\n                        children: /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"text\",\n                          className: \"form-control\",\n                          placeholder: \"City \",\n                          id: \"city\",\n                          name: \"city\",\n                          required: true,\n                          value: userData.city,\n                          onChange: handleChange,\n                          style: {\n                            background: error.city ? '#FFF1F1' : '',\n                            border: error.city ? '1px solid #FA6767' : ''\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 339,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 338,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 337,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-sm-12 col-md-6 col-lg-6 col-xl-6\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"form-group\",\n                        children: /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"text\",\n                          className: \"form-control\",\n                          placeholder: \"State \",\n                          id: \"state\",\n                          name: \"state\",\n                          required: true,\n                          value: userData.state,\n                          onChange: handleChange,\n                          style: {\n                            background: error.state ? '#FFF1F1' : '',\n                            border: error.state ? '1px solid #FA6767' : ''\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 357,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 356,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 355,\n                      columnNumber: 25\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      className: \"col-sm-12 col-md-6 col-lg-6 col-xl-6\",\n                      children: /*#__PURE__*/_jsxDEV(\"div\", {\n                        className: \"form-group\",\n                        children: /*#__PURE__*/_jsxDEV(\"input\", {\n                          type: \"number\",\n                          className: \"form-control zipcode\",\n                          placeholder: \"Zip Code\",\n                          id: \"zip\",\n                          name: \"zip\",\n                          required: true,\n                          value: userData.zip,\n                          onChange: handleChange,\n                          style: {\n                            background: error.zip ? '#FFF1F1' : '',\n                            border: error.zip ? '1px solid #FA6767' : ''\n                          }\n                        }, void 0, false, {\n                          fileName: _jsxFileName,\n                          lineNumber: 375,\n                          columnNumber: 29\n                        }, this)\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 374,\n                        columnNumber: 27\n                      }, this)\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 373,\n                      columnNumber: 25\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 316,\n                    columnNumber: 23\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 315,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 314,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 190,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 189,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relativepos\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.btnSec,\n              children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\",\n                className: btnStyles.secondary,\n                onClick: () => {\n                  props.setPreviousPage();\n                  props.previousStep();\n                },\n                children: \"Back\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 422,\n                columnNumber: 17\n              }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                type: \"button\" // className={\n                //   isSelected ? btnStyles.primary : btnStyles.primaryDisabled\n                // }\n                // onClick={() => {\n                //   props.setNextPage();\n                //   props.nextStep();\n                // }}\n                // disabled={!isSelected}\n                ,\n                className: btnStyles.primary,\n                onClick: e => {\n                  if (!locationDealer && validateForm()) {\n                    setBtnDisabled(true);\n                    setLocalUserData(e);\n                  } else if (locationDealer) {\n                    setLocalUserData(e);\n                  }\n                },\n                disabled: btnDisabled,\n                children: \"Continue\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 432,\n                columnNumber: 17\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 421,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 420,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 172,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 163,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 162,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 161,\n    columnNumber: 5\n  }, this);\n};\n\nexport default pickLocation;","map":{"version":3,"sources":["/home/encora/Documents/projects/testDrive/tdn/components/pick-location/pickLocation.js"],"names":["Image","React","useState","useEffect","styles","btnStyles","SechduleContent","StepBar","StepBarV1","StepbarV1Style","useCarData","useUpdateCarData","Axios","resolveHref","pickLocation","props","isSelected","setisSelected","rooftops","setRooftops","rooftopCars","setRooftopCars","locationDealer","setlocationDealer","btnDisabled","setBtnDisabled","userData","setUserData","address","city","state","zip","error","setError","selectedCarData","scrollToTop","isActive","get","then","response","data","console","log","validateForm","validation","length","test","handleChange","e","newData","target","name","value","setLocalUserData","preventDefault","driveForm","localStorage","getItem","dupDriveForm","JSON","parse","post","UserID","Address","AtHome","res","obj","atHome","setItem","stringify","setNextPage","nextStep","catch","err","getCarData","id","rooftopData","fields","Cars","newCars","i","push","display","currentPage","progressContent","hideForMobile","hideForLaptop","Geolocation","map","car","thumbnails","large","url","Name","background","border","btnSec","secondary","setPreviousPage","previousStep","primary"],"mappings":"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","sourcesContent":["/** @format */\nimport Image from 'next/image';\nimport React, { useState, useEffect } from 'react';\nimport styles from '../../styles/Home.module.css';\nimport btnStyles from './../../styles/Btn.module.css';\nimport SechduleContent from './../../common-component/sechduleDesc';\nimport StepBar from './../../components/step-bar/stepBar';\nimport StepBarV1 from './../../components/step-bar/stepBarV1';\nimport StepbarV1Style from './../../styles/StepBarV1.module.css';\n\nimport { useCarData, useUpdateCarData } from './../../contexts/CarDataContext';\nimport Axios from 'axios';\nimport { resolveHref } from 'next/dist/next-server/lib/router/router';\n\nconst pickLocation = (props) => {\n  const [isSelected, setisSelected] = useState(false);\n  const [rooftops, setRooftops] = useState([]);\n  const [rooftopCars, setRooftopCars] = useState([]);\n  const [locationDealer, setlocationDealer] = useState(true);\n  const [btnDisabled, setBtnDisabled] = useState(false);\n  const [userData, setUserData] = useState({\n    address: '',\n    city: '',\n    state: '',\n    zip: '',\n  });\n  const [error, setError] = useState({\n    address: false,\n    city: false,\n    state: false,\n    zip: false,\n  });\n  // const { rooftopData } = props;\n  // const selectedCar = useCarData();\n  const { selectedCarData } = props;\n  useEffect(() => {\n    props.scrollToTop();\n  }, [props.isActive]);\n\n  // const getCarData = () => {};\n\n  useEffect(() => {\n    if (props.isActive === true) {\n      Axios.get(`/api/getRooftops`).then(\n        (response) => {\n          setRooftops(response.data);\n        },\n        (error) => {\n          console.log(error);\n        }\n      );\n    }\n  }, [props.isActive]);\n\n  const validateForm = () => {\n    let validation = true;\n    let error = {\n      address: false,\n      city: false,\n      state: false,\n      zip: false,\n    };\n\n    if (userData.address.length < 3) {\n      validation = false;\n      error.address = true;\n    }\n    if (userData.city.length < 2) {\n      validation = false;\n      error.city = true;\n    }\n    if (userData.state.length < 2) {\n      validation = false;\n      error.state = true;\n    }\n    if (!/(^\\d{5}$)|(^\\d{5}-\\d{4}$)/.test(userData.zip)) {\n      validation = false;\n      error.zip = true;\n    }\n    setError(error);\n    return validation;\n  };\n\n  const handleChange = (e) => {\n    const newData = {\n      ...userData,\n      [e.target.name]: e.target.value,\n    };\n    setUserData(newData);\n    // data({ userData: newData });\n    setError({\n      ...error,\n      [e.target.name]: false,\n    });\n  };\n\n  const setLocalUserData = (e) => {\n    e.preventDefault();\n    const { address, city, state, zip } = userData;\n    const driveForm = localStorage.getItem('driveForm');\n    let dupDriveForm = JSON.parse(driveForm);\n    Axios.post('/api/user/updateLocation', {\n      UserID: localStorage.getItem('userId'),\n      Address: `${address}, ${city}, ${state} - ${zip} `,\n      AtHome: !locationDealer,\n    })\n      .then((res) => {\n        if (res.data) {\n          let obj = {\n            ...dupDriveForm,\n            address: `${address}, ${city}, ${state} - ${zip} `,\n            atHome: !locationDealer,\n          };\n          localStorage.setItem('driveForm', JSON.stringify(obj));\n          setBtnDisabled(false);\n          props.setNextPage();\n          props.nextStep();\n        }\n      })\n      .catch((err) => console.log(err));\n  };\n\n  const getCarData = async (id) => {\n    try {\n      let data = {};\n      await Axios.get(`/api/get-car/${id}`).then(\n        (response) => {\n          data = response.data;\n        },\n        (error) => {\n          console.log(error);\n        }\n      );\n      return data;\n    } catch (err) {\n      console.log(err);\n      return [];\n    }\n  };\n\n  useEffect(async () => {\n    if (\n      props.isActive == true &&\n      props.rooftopData &&\n      props.rooftopData.fields &&\n      props.rooftopData.fields.Cars\n    ) {\n      let newCars = [];\n      for (let i = 0; i < props.rooftopData.fields.Cars.length; i++) {\n        let data = await getCarData(props.rooftopData.fields.Cars[i]);\n        newCars.push(data);\n        if (i >= 2) {\n          break;\n        }\n      }\n      setRooftopCars(newCars);\n    }\n  }, [props.rooftopData, props.isActive]);\n\n  return (\n    <div style={{ display: `${props.currentPage === 3 ? 'block' : 'none'}` }}>\n      <div className=\"container-fluid\">\n        <div className=\"row justify-content-center\">\n          {/* <div className=\"col-sm-12 col-md-5 col-lg-5 hideContent\">\n            <img\n              className=\"d-block w-100\"\n              className={styles.imageborder}\n              src=\"/carDriving.png\"\n              alt=\"Picture of the car\"\n            />\n          </div> */}\n          <div className=\"col-sm-12 col-md-7 col-lg-7 min-width-desktop\">\n            <SechduleContent />\n            <div className={`${styles.progressContent}  my-5`}>\n              {/* <StepBar activeStep=\"3\" size=\"4\" /> */}\n              <div className={StepbarV1Style.hideForMobile}>\n                <StepBarV1 {...props} />\n              </div>\n              <div className={StepbarV1Style.hideForLaptop}>\n                <StepBarV1 mobile={true} {...props} />\n              </div>\n            </div>\n\n            <div className=\"my-4\">\n              <div className=\"pick-location-desc\">\n                <h2>I want to Pickup Location</h2>\n              </div>\n            </div>\n            <div className=\"\">\n              <div className=\"\">\n                <div className=\"tab_container\">\n                  <div className=\"button_Tab\">\n                    {/* <ul>\n                      <li className=\"active\">\n                        <a href=\"javascript:void(0)\"> Dealership</a>\n                      </li>\n                      <li>\n                        <a href=\"javascript:void(0)\"> Home</a>\n                      </li>\n                    </ul> */}\n\n                    <button\n                      type=\"button\"\n                      className={locationDealer ? 'active' : ''}\n                      onClick={() => {\n                        if (locationDealer) return;\n                        setlocationDealer(true);\n                      }}\n                    >\n                      Dealership\n                    </button>\n                    <button\n                      type=\"button\"\n                      className={locationDealer ? '' : 'active'}\n                      onClick={() => {\n                        if (!locationDealer) return;\n                        setlocationDealer(false);\n                      }}\n                    >\n                      Home\n                    </button>\n                    {/* <button type=\"button\" className=\"active\">\n                      Work\n                    </button> */}\n                  </div>\n                </div>\n                {/* dealership tab  */}\n\n                {locationDealer ? (\n                  <div className=\"dealershipContent\">\n                    <div>\n                      <div className=\"row\">\n                        <div className=\"col-sm-12 col-md-4 col-lg-4\">\n                          <div className=\"mapContent\">\n                            {/* <img src=\"/map.png\" alt=\"\" /> */}\n                            <iframe\n                              className=\"confirmMap\"\n                              src={\n                                props.rooftopData &&\n                                props.rooftopData.fields &&\n                                props.rooftopData.fields.Geolocation\n                              }\n                              frameBorder=\"0\"\n                              allowFullScreen=\"\"\n                              aria-hidden=\"false\"\n                              tabIndex=\"0\"\n                              width=\"100%\"\n                              height=\"220px\"\n                            ></iframe>\n                          </div>\n                        </div>\n\n                        <div className=\"col-sm-12 col-md-8 col-lg-8\">\n                          <div className=\"row\">\n                            {rooftopCars && rooftopCars[0] ? (\n                              rooftopCars.map((car) => (\n                                <>\n                                  {' '}\n                                  <div className=\"col-sm-12 col-md-4 col-lg-4 p-0 displaynone\">\n                                    <Image\n                                      className=\"pickLocationImg\"\n                                      src={\n                                        car.fields.Image[0].thumbnails.large.url\n                                      }\n                                      alt=\"\"\n                                      width={250}\n                                      height={150}\n                                      layout=\"responsive\"\n                                    />\n                                  </div>\n                                </>\n                              ))\n                            ) : (\n                              <>\n                                <div className=\"col-sm-12 col-md-4 col-lg-4 p-0 displaynone\">\n                                  Loading . . .\n                                </div>\n                              </>\n                            )}\n                          </div>\n                          <div className=\"dealarDesc\">\n                            <h2>\n                              {props.rooftopData &&\n                                props.rooftopData.fields &&\n                                props.rooftopData.fields.Name}\n                            </h2>\n                            <p>\n                              {props.rooftopData &&\n                                props.rooftopData.fields &&\n                                props.rooftopData.fields.Address}\n                            </p>\n                          </div>\n                        </div>\n\n                        {/* <div className=\"col-sm-12 col-md-3 col-lg-3\">\n                          <button\n                            className={\n                              isSelected\n                                ? styles.selectedCarBtn\n                                : styles.chooseBTn\n                            }\n                            type=\"button\"\n                            onClick={() => {\n                              setisSelected(!isSelected);\n                            }}\n                          >\n                            {isSelected ? 'Selected' : 'Choose'}\n                          </button>\n                        </div> */}\n                      </div>\n                    </div>\n                  </div>\n                ) : (\n                  <div className=\"HomeContent\">\n                    <div className=\"homeLocationForm\">\n                      <div className=\"row\">\n                        <div className=\"col-sm-12 col-md-6 col-lg-6 col-xl-6\">\n                          <div className=\"form-group\">\n                            <input\n                              type=\"text\"\n                              className=\"form-control\"\n                              placeholder=\"Address line \"\n                              id=\"Addressline \"\n                              name=\"address\"\n                              onChange={handleChange}\n                              required\n                              value={userData.address}\n                              style={{\n                                background: error.address ? '#FFF1F1' : '',\n                                border: error.address\n                                  ? '1px solid #FA6767'\n                                  : '',\n                              }}\n                            />\n                          </div>\n                        </div>\n                        <div className=\"col-sm-12 col-md-6 col-lg-6 col-xl-6\">\n                          <div className=\"form-group\">\n                            <input\n                              type=\"text\"\n                              className=\"form-control\"\n                              placeholder=\"City \"\n                              id=\"city\"\n                              name=\"city\"\n                              required\n                              value={userData.city}\n                              onChange={handleChange}\n                              style={{\n                                background: error.city ? '#FFF1F1' : '',\n                                border: error.city ? '1px solid #FA6767' : '',\n                              }}\n                            />\n                          </div>\n                        </div>\n                        <div className=\"col-sm-12 col-md-6 col-lg-6 col-xl-6\">\n                          <div className=\"form-group\">\n                            <input\n                              type=\"text\"\n                              className=\"form-control\"\n                              placeholder=\"State \"\n                              id=\"state\"\n                              name=\"state\"\n                              required\n                              value={userData.state}\n                              onChange={handleChange}\n                              style={{\n                                background: error.state ? '#FFF1F1' : '',\n                                border: error.state ? '1px solid #FA6767' : '',\n                              }}\n                            />\n                          </div>\n                        </div>\n                        <div className=\"col-sm-12 col-md-6 col-lg-6 col-xl-6\">\n                          <div className=\"form-group\">\n                            <input\n                              type=\"number\"\n                              className=\"form-control zipcode\"\n                              placeholder=\"Zip Code\"\n                              id=\"zip\"\n                              name=\"zip\"\n                              required\n                              value={userData.zip}\n                              onChange={handleChange}\n                              style={{\n                                background: error.zip ? '#FFF1F1' : '',\n                                border: error.zip ? '1px solid #FA6767' : '',\n                              }}\n                            />\n                          </div>\n                        </div>\n                      </div>\n                      {/* <iframe\n                        className=\"confirmMap\"\n                        src={`https://maps.google.com/maps?q=${escape(\n                          userData.address +\n                            ' ' +\n                            userData.city +\n                            ' ' +\n                            userData.state +\n                            ' ' +\n                            userData.zip\n                        )}&t=&z=13&ie=UTF8&iwloc=&output=embed`}\n                        width=\"600\"\n                        height=\"420\"\n                        frameBorder=\"0\"\n                        allowFullScreen=\"\"\n                        aria-hidden=\"false\"\n                        tabIndex=\"0\"\n                      ></iframe> */}\n                    </div>\n                  </div>\n                )}\n\n                {/*  */}\n\n                {/* Home Tab  */}\n              </div>\n            </div>\n\n            <div className=\"relativepos\">\n              <div className={styles.btnSec}>\n                <button\n                  type=\"button\"\n                  className={btnStyles.secondary}\n                  onClick={() => {\n                    props.setPreviousPage();\n                    props.previousStep();\n                  }}\n                >\n                  Back\n                </button>\n                <button\n                  type=\"button\"\n                  // className={\n                  //   isSelected ? btnStyles.primary : btnStyles.primaryDisabled\n                  // }\n                  // onClick={() => {\n                  //   props.setNextPage();\n                  //   props.nextStep();\n                  // }}\n                  // disabled={!isSelected}\n                  className={btnStyles.primary}\n                  onClick={(e) => {\n                    if (!locationDealer && validateForm()) {\n                      setBtnDisabled(true);\n                      setLocalUserData(e);\n                    } else if (locationDealer) {\n                      setLocalUserData(e);\n                    }\n                  }}\n                  disabled={btnDisabled}\n                >\n                  Continue\n                </button>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default pickLocation;\n"]},"metadata":{},"sourceType":"module"}