{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/encora/Documents/projects/testDrive/tdn/components/confirm-test-drive/setTestDrive.js\",\n    _this = this,\n    _s = $RefreshSig$();\n\n/** @format */\nimport styles from \"./../../styles/setDrive.module.css\";\nimport React, { useEffect, useState } from \"react\";\nimport btnStyles from \"./../../styles/Btn.module.css\";\nimport Setcardrive from \"./../../common-component/setCarslider\";\nimport { useUserData } from \"../../contexts/UserDataContext\";\nimport { useDateTimeData } from \"../../contexts/DateTimeDataContext\";\nimport Head from \"next/head\";\nimport Axios from \"axios\";\n\nvar setYourDrive = function setYourDrive(props) {\n  _s();\n\n  var _useState = useState(false),\n      calendarDate = _useState[0],\n      setCalendarDate = _useState[1];\n\n  useEffect(function () {\n    props.scrollToTop();\n  }, [props.isActive]);\n  var base = \"https://calendly.com/algoscale-test/test-drive-ninja/\";\n  var data = useUserData();\n  var userData = data && data.userData;\n  var dateTime = useDateTimeData();\n\n  var _useState2 = useState(\"\"),\n      selectedDateTime = _useState2[0],\n      setSelectedDateTime = _useState2[1];\n\n  var _useState3 = useState(\"\"),\n      brand = _useState3[0],\n      setBrand = _useState3[1];\n\n  var _useState4 = useState(\"\"),\n      calendlyUrl = _useState4[0],\n      setCalendlyUrl = _useState4[1];\n\n  var pageSettings = {\n    backgroundColor: \"ffffff\",\n    hideEventTypeDetails: true,\n    hideLandingPageDetails: true\n  };\n  var calendlyStyles = {\n    height: \"100%\"\n  };\n  var prefill = {\n    email: data && data.userData && data.userData.email,\n    firstName: data && data.userData && data.userData.firstName,\n    lastName: data && data.userData && data.userData.lastName,\n    location: props.rooftopData && props.rooftopData.fields && props.rooftopData.fields.Name,\n    customAnswers: {\n      a2: data && data.userData && data.userData.phone\n    }\n  };\n  useEffect(function () {\n    var dateObj = new Date(props.selectedDateTime);\n    setCalendlyUrl(\"\".concat(base).concat(props.selectedDateTime, \"?month=\").concat(dateObj.getFullYear(), \"-\").concat(dateObj.getMonth() < 10 ? 0 : \"\").concat(dateObj.getMonth() + 1, \"&date=\").concat(String(props.selectedDateTime).split(\"T\")[0]));\n  }, [props.selectedDateTime]);\n  useEffect(function () {\n    var dateObj = new Date(props.selectedDateTime);\n    var days = [\"Sunday\", \"Monday\", \"Tuesday\", \"Wednesday\", \"Thursday\", \"Friday\", \"Saturday\"];\n    var dateString = \"\".concat(dateObj.toLocaleString(\"en-US\", {\n      hour: \"numeric\",\n      minute: \"numeric\",\n      hour12: true\n    }), \", \").concat(days[dateObj.getDay()], \", \").concat(dateObj.toLocaleString(\"default\", {\n      month: \"short\"\n    }), \" \").concat(dateObj.getDate());\n    setSelectedDateTime(dateString);\n  }, [props.isActive]);\n  useEffect(function () {\n    var brandName = \"\";\n\n    if (props.isActive === true && props.selectedCarData && props.selectedCarData.fields) {\n      Axios.get(\"/api/get-brand/\".concat(props.selectedCarData.fields.Brand[0])).then(function (response) {\n        brandName = response.data.fields.Name;\n        setBrand(brandName);\n      }, function (error) {\n        console.log(error);\n      });\n    }\n  }, [props.isActive]);\n\n  var addToCalender = function addToCalender() {\n    var gapi = window.gapi;\n    var CLIENT_ID = \"930627695734-ru0p2hn5nnforcdn4ee2lt0qjgd3bl2n.apps.googleusercontent.com\";\n    var API_KEY = \"AIzaSyCrd0MTaRwaQENF5J4Alw2wPtcqGI5q8G0\";\n    var DISCOVERY_DOCS = [\"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\"];\n    var SCOPES = \"https://www.googleapis.com/auth/calendar.events\";\n    gapi.load(\"client:auth2\", function () {\n      gapi.client.init({\n        apiKey: API_KEY,\n        clientId: CLIENT_ID,\n        discoveryDocs: DISCOVERY_DOCS,\n        scope: SCOPES\n      });\n      window.gapi.auth2.init({\n        client_id: CLIENT_ID,\n        scope: SCOPES\n      }).then(function (a, b) {\n        window.gapi.auth2.getAuthInstance().isSignedIn.listen(function (signedIn) {\n          console.log(signedIn);\n        });\n        window.gapi.auth2.getAuthInstance().currentUser.listen(function (user) {\n          console.log(user);\n        });\n        var event = {\n          summary: \"Test Drive Details\",\n          location: \"800 Howard St., San Francisco, CA 94103\",\n          description: props.rooftopData && props.rooftopData.fields.Name,\n          start: {\n            dateTime: dateTime,\n            timeZone: \"America/Los_Angeles\"\n          },\n          end: {\n            dateTime: new Date(new Date(dateTime).getTime() + 30 * 60000),\n            timeZone: \"America/Los_Angeles\"\n          },\n          recurrence: [\"RRULE:FREQ=DAILY;COUNT=2\"],\n          attendees: [{\n            email: props.rooftopData && props.rooftopData.fields.Email\n          }, {\n            email: userData.email\n          }],\n          reminders: {\n            useDefault: false,\n            overrides: [{\n              method: \"email\",\n              minutes: 24 * 60\n            }, {\n              method: \"popup\",\n              minutes: 10\n            }]\n          }\n        };\n        var request = gapi.client.calendar.events.insert({\n          calendarId: \"primary\",\n          resource: event,\n          sendUpdates: \"all\"\n        });\n        request.execute(function (event) {\n          setCalendarDate(true); // window.open(event.htmlLink)\n        });\n      });\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      display: \"\".concat(props.currentPage === 8 ? \"block\" : \"none\")\n    },\n    children: [/*#__PURE__*/_jsxDEV(Head, {\n      children: /*#__PURE__*/_jsxDEV(\"script\", {\n        src: \"https://apis.google.com/js/api.js\",\n        type: \"text/javascript\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 171,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 7\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"container-fluid bggray d-flex justify-content-center height100vh overflow-auto\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"bgwhite centerDiv1\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pt-5 bgwhite\",\n          style: {\n            borderRadius: \"30px\"\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: styles.setdriveheading,\n            children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n              children: \"You\\u2019re all set! See you soon.\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 180,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n              children: \"Please check your email!\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 181,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 179,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"marTopBot20 text-center\",\n            children: /*#__PURE__*/_jsxDEV(\"img\", {\n              src: props.selectedCarData && props.selectedCarData.fields && props.selectedCarData.fields.Image[0].url,\n              className: styles.testDriveImage\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 184,\n              columnNumber: 15\n            }, _this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 183,\n            columnNumber: 13\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"py-4 anotherVehicle\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: styles.setdriveDesc,\n              children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n                children: [brand, \" \", props.selectedCarData && props.selectedCarData.fields && props.selectedCarData.fields.Name]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 196,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n                children: \"My test drive will be:\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 203,\n                columnNumber: 17\n              }, _this), /*#__PURE__*/_jsxDEV(\"h3\", {\n                children: selectedDateTime\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 204,\n                columnNumber: 17\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 195,\n              columnNumber: 15\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relativepos\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: styles.addcalender,\n                children: /*#__PURE__*/_jsxDEV(\"button\", {\n                  type: \"button\",\n                  className: btnStyles.primary,\n                  onClick: function onClick() {\n                    props.goToStep(1);\n                    props.setInitialPage();\n                  },\n                  children: \"Schedule Another Test Drive\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 216,\n                  columnNumber: 19\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 207,\n                columnNumber: 17\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 206,\n              columnNumber: 15\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 13\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 178,\n          columnNumber: 11\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 177,\n        columnNumber: 9\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 176,\n      columnNumber: 7\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 169,\n    columnNumber: 5\n  }, _this);\n};\n\n_s(setYourDrive, \"Evef+MIqrGcS1bcOj+aQyplZ9lg=\", false, function () {\n  return [useUserData, useDateTimeData];\n});\n\nexport default setYourDrive;","map":{"version":3,"sources":["/home/encora/Documents/projects/testDrive/tdn/components/confirm-test-drive/setTestDrive.js"],"names":["styles","React","useEffect","useState","btnStyles","Setcardrive","useUserData","useDateTimeData","Head","Axios","setYourDrive","props","calendarDate","setCalendarDate","scrollToTop","isActive","base","data","userData","dateTime","selectedDateTime","setSelectedDateTime","brand","setBrand","calendlyUrl","setCalendlyUrl","pageSettings","backgroundColor","hideEventTypeDetails","hideLandingPageDetails","calendlyStyles","height","prefill","email","firstName","lastName","location","rooftopData","fields","Name","customAnswers","a2","phone","dateObj","Date","getFullYear","getMonth","String","split","days","dateString","toLocaleString","hour","minute","hour12","getDay","month","getDate","brandName","selectedCarData","get","Brand","then","response","error","console","log","addToCalender","gapi","window","CLIENT_ID","API_KEY","DISCOVERY_DOCS","SCOPES","load","client","init","apiKey","clientId","discoveryDocs","scope","auth2","client_id","a","b","getAuthInstance","isSignedIn","listen","signedIn","currentUser","user","event","summary","description","start","timeZone","end","getTime","recurrence","attendees","Email","reminders","useDefault","overrides","method","minutes","request","calendar","events","insert","calendarId","resource","sendUpdates","execute","display","currentPage","borderRadius","setdriveheading","Image","url","testDriveImage","setdriveDesc","addcalender","primary","goToStep","setInitialPage"],"mappings":"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","sourcesContent":["/** @format */\n\nimport styles from \"./../../styles/setDrive.module.css\";\nimport React, { useEffect, useState } from \"react\";\nimport btnStyles from \"./../../styles/Btn.module.css\";\nimport Setcardrive from \"./../../common-component/setCarslider\";\nimport { useUserData } from \"../../contexts/UserDataContext\";\nimport { useDateTimeData } from \"../../contexts/DateTimeDataContext\";\nimport Head from \"next/head\";\nimport Axios from \"axios\";\n\nconst setYourDrive = (props) => {\n  const [calendarDate, setCalendarDate] = useState(false);\n  useEffect(() => {\n    props.scrollToTop();\n  }, [props.isActive]);\n\n  const base = \"https://calendly.com/algoscale-test/test-drive-ninja/\";\n\n  let data = useUserData();\n  let userData = data && data.userData;\n  let dateTime = useDateTimeData();\n  const [selectedDateTime, setSelectedDateTime] = useState(\"\");\n  const [brand, setBrand] = useState(\"\");\n  const [calendlyUrl, setCalendlyUrl] = useState(\"\");\n\n  const pageSettings = {\n    backgroundColor: \"ffffff\",\n    hideEventTypeDetails: true,\n    hideLandingPageDetails: true,\n  };\n  const calendlyStyles = {\n    height: \"100%\",\n  };\n  const prefill = {\n    email: data && data.userData && data.userData.email,\n    firstName: data && data.userData && data.userData.firstName,\n    lastName: data && data.userData && data.userData.lastName,\n    location:\n      props.rooftopData &&\n      props.rooftopData.fields &&\n      props.rooftopData.fields.Name,\n    customAnswers: {\n      a2: data && data.userData && data.userData.phone,\n    },\n  };\n\n  useEffect(() => {\n    const dateObj = new Date(props.selectedDateTime);\n    setCalendlyUrl(\n      `${base}${props.selectedDateTime}?month=${dateObj.getFullYear()}-${\n        dateObj.getMonth() < 10 ? 0 : \"\"\n      }${dateObj.getMonth() + 1}${\"&date=\"}${\n        String(props.selectedDateTime).split(\"T\")[0]\n      }`\n    );\n  }, [props.selectedDateTime]);\n\n  useEffect(() => {\n    const dateObj = new Date(props.selectedDateTime);\n    var days = [\n      \"Sunday\",\n      \"Monday\",\n      \"Tuesday\",\n      \"Wednesday\",\n      \"Thursday\",\n      \"Friday\",\n      \"Saturday\",\n    ];\n\n    let dateString = `${dateObj.toLocaleString(\"en-US\", {\n      hour: \"numeric\",\n      minute: \"numeric\",\n      hour12: true,\n    })}, ${days[dateObj.getDay()]}, ${dateObj.toLocaleString(\"default\", {\n      month: \"short\",\n    })} ${dateObj.getDate()}`;\n    setSelectedDateTime(dateString);\n  }, [props.isActive]);\n\n  useEffect(() => {\n    let brandName = \"\";\n    if (\n      props.isActive === true &&\n      props.selectedCarData &&\n      props.selectedCarData.fields\n    ) {\n      Axios.get(`/api/get-brand/${props.selectedCarData.fields.Brand[0]}`).then(\n        (response) => {\n          brandName = response.data.fields.Name;\n          setBrand(brandName);\n        },\n        (error) => {\n          console.log(error);\n        }\n      );\n    }\n  }, [props.isActive]);\n\n  const addToCalender = () => {\n    var gapi = window.gapi;\n    var CLIENT_ID =\n      \"930627695734-ru0p2hn5nnforcdn4ee2lt0qjgd3bl2n.apps.googleusercontent.com\";\n    var API_KEY = \"AIzaSyCrd0MTaRwaQENF5J4Alw2wPtcqGI5q8G0\";\n    var DISCOVERY_DOCS = [\n      \"https://www.googleapis.com/discovery/v1/apis/calendar/v3/rest\",\n    ];\n    var SCOPES = \"https://www.googleapis.com/auth/calendar.events\";\n    gapi.load(\"client:auth2\", () => {\n      gapi.client.init({\n        apiKey: API_KEY,\n        clientId: CLIENT_ID,\n        discoveryDocs: DISCOVERY_DOCS,\n        scope: SCOPES,\n      });\n\n      window.gapi.auth2\n        .init({\n          client_id: CLIENT_ID,\n          scope: SCOPES,\n        })\n        .then(function (a, b) {\n          window.gapi.auth2.getAuthInstance().isSignedIn.listen((signedIn) => {\n            console.log(signedIn);\n          });\n          window.gapi.auth2.getAuthInstance().currentUser.listen((user) => {\n            console.log(user);\n          });\n          var event = {\n            summary: \"Test Drive Details\",\n            location: \"800 Howard St., San Francisco, CA 94103\",\n            description: props.rooftopData && props.rooftopData.fields.Name,\n            start: {\n              dateTime: dateTime,\n              timeZone: \"America/Los_Angeles\",\n            },\n            end: {\n              dateTime: new Date(new Date(dateTime).getTime() + 30 * 60000),\n              timeZone: \"America/Los_Angeles\",\n            },\n            recurrence: [\"RRULE:FREQ=DAILY;COUNT=2\"],\n            attendees: [\n              { email: props.rooftopData && props.rooftopData.fields.Email },\n              { email: userData.email },\n            ],\n            reminders: {\n              useDefault: false,\n              overrides: [\n                { method: \"email\", minutes: 24 * 60 },\n                { method: \"popup\", minutes: 10 },\n              ],\n            },\n          };\n\n          var request = gapi.client.calendar.events.insert({\n            calendarId: \"primary\",\n            resource: event,\n            sendUpdates: \"all\",\n          });\n\n          request.execute((event) => {\n            setCalendarDate(true);\n            // window.open(event.htmlLink)\n          });\n        });\n    });\n  };\n  return (\n    <div style={{ display: `${props.currentPage === 8 ? \"block\" : \"none\"}` }}>\n      <Head>\n        <script\n          src=\"https://apis.google.com/js/api.js\"\n          type=\"text/javascript\"\n        ></script>\n      </Head>\n      <div className=\"container-fluid bggray d-flex justify-content-center height100vh overflow-auto\">\n        <div className=\"bgwhite centerDiv1\">\n          <div className=\"pt-5 bgwhite\" style={{ borderRadius: \"30px\" }}>\n            <div className={styles.setdriveheading}>\n              <h1>You’re all set! See you soon.</h1>\n              <p>Please check your email!</p>\n            </div>\n            <div className=\"marTopBot20 text-center\">\n              <img\n                src={\n                  props.selectedCarData &&\n                  props.selectedCarData.fields &&\n                  props.selectedCarData.fields.Image[0].url\n                }\n                className={styles.testDriveImage}\n              />\n              {/* <Setcardrive selectedCarData={props.selectedCarData} /> */}\n            </div>\n            <div className=\"py-4 anotherVehicle\">\n              <div className={styles.setdriveDesc}>\n                <h4>\n                  {brand}\n                  {` `}\n                  {props.selectedCarData &&\n                    props.selectedCarData.fields &&\n                    props.selectedCarData.fields.Name}\n                </h4>\n                <p>My test drive will be:</p>\n                <h3>{selectedDateTime}</h3>\n              </div>\n              <div className=\"relativepos\">\n                <div className={styles.addcalender}>\n                  {/* <button\n                    type=\"button\"\n                    className={btnStyles.secondary}\n                    onClick={addToCalender}\n                  >\n                    {calendarDate ? 'Added' : 'Add'} to Calendar\n                  </button> */}\n                  {}\n                  <button\n                    type=\"button\"\n                    className={btnStyles.primary}\n                    onClick={() => {\n                      props.goToStep(1);\n                      props.setInitialPage();\n                    }}\n                  >\n                    {/* Add Another Vehicle */}\n                    Schedule Another Test Drive\n                  </button>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\nexport default setYourDrive;\n"]},"metadata":{},"sourceType":"module"}